(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("game",["require","exports","module"],function(b,c,d){var e;return e=function(){function b(b,c){this.wrapper=b,this.debug=null!=c?c:!1,this.tick=a(this.tick,this),this.canvas=this.wrapper.find("canvas").get(0),this.setSize(this.wrapper.width(),this.wrapper.height()),this.context=this.canvas.getContext("2d"),this.running=!1,this.debug&&this.setupStats()}return b.prototype.clearScreen=function(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},b.prototype.setSize=function(a,b){return this.canvas.width=a,this.canvas.height=b},b.prototype.getWidth=function(){return this.canvas.width},b.prototype.getHeight=function(){return this.canvas.height},b.prototype.getWrapper=function(){return this.wrapper},b.prototype.setupStats=function(){var a;return this.fpsStats=new Stats,this.fpsStats.setMode(0),a=$(this.fpsStats.domElement),a.css({position:"absolute",left:-a.width(),top:0}),this.wrapper.append(this.fpsStats.domElement),this.fpsMsStats=new Stats,this.fpsMsStats.setMode(1),a=$(this.fpsMsStats.domElement),a.css({position:"absolute",left:-a.width(),top:50}),this.wrapper.append(this.fpsMsStats.domElement),this.tickStats=new Stats,this.tickStats.setMode(1),a=$(this.tickStats.domElement),a.css({position:"absolute",left:-a.width(),top:100}),this.wrapper.append(this.tickStats.domElement)},b.prototype.run=function(){return this.running=!0,this.lastTick=new Date,requestAnimFrame(this.tick)},b.prototype.stop=function(){return this.running=!1},b.prototype.tick=function(){var a,b,c;return a=(Date.now()-this.lastTick)/1e3,this.lastTick=Date.now(),this.debug&&this.tickStats.begin(),null!=(b=this.screen)&&b.update(a),this.debug&&this.tickStats.end(),this.debug&&this.fpsStats.begin(),this.debug&&this.fpsMsStats.begin(),this.clearScreen(),null!=(c=this.screen)&&c.draw(this.context),this.debug&&this.fpsStats.end(),this.debug&&this.fpsMsStats.end(),this.running?requestAnimFrame(this.tick):void 0},b}(),d.exports=e})}).call(this),function(){define("screen",["require","exports","module"],function(a,b,c){var d;return d=function(){function a(a){this.game=a}return a.prototype.update=function(){},a.prototype.draw=function(){},a}(),c.exports=d})}.call(this),function(){define("math/vector2",["require","exports","module"],function(a,b,c){var d;return d=function(){function a(a,b){this.x=null!=a?a:0,this.y=null!=b?b:0}return a.prototype.set=function(b,c){var d;return b instanceof a?(d=b,this.x=d.x,this.y=d.y):(this.x=b,this.y=c),this},a.prototype.clone=function(){return new a(this.x,this.y)},a.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},a.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},a.prototype.substract=function(b,c){var d;return b instanceof a?(d=b,b=d.getX(),c=d.getY()):null!=b&&null==c&&(c=b),this.x=this.x-b,this.y=this.y-c,this},a.prototype.add=function(b,c){var d;return b instanceof a?(d=b,b=d.getX(),c=d.getY()):null!=b&&null==c&&(c=b),this.x=this.x+b,this.y=this.y+c,this},a.prototype.divideBy=function(b,c){var d;return b instanceof a?(d=b,b=d.getX(),c=d.getY()):null!=b&&null==c&&(c=b),this.x=this.x/b,this.y=this.y/c,this},a.prototype.multiply=function(b,c){var d;return b instanceof a?(d=b,b=d.getX(),c=d.getY()):null!=b&&null==c&&(c=b),this.x=this.x*b,this.y=this.y*c,this},a.prototype.getX=function(){return this.x},a.prototype.getY=function(){return this.y},a.prototype.setX=function(a){return this.x=a},a.prototype.setY=function(a){return this.y=a},a}(),c.exports=d})}.call(this),function(){define("math/rectangle",["require","exports","module","./vector2"],function(a,b,c){var d,e;return e=a("./vector2"),d=function(){function a(a,b,c,d){null==a&&(a=0),null==b&&(b=0),this.width=null!=c?c:0,this.height=null!=d?d:0,this.position=new e(a,b)}return a.prototype.setPosition=function(){return this.position.set.call(this,arguments)},a.prototype.setSize=function(a,b){return this.width=a,this.height=b},a.prototype.getWidth=function(){return this.width},a.prototype.getHeight=function(){return this.height},a}(),c.exports=d})}.call(this),function(){define("node",["require","exports","module","./math/vector2","./math/rectangle"],function(a,b,c){var d,e,f;return f=a("./math/vector2"),e=a("./math/rectangle"),d=function(){function a(a){this.game=a,this.origin=new f,this.position=new f,this.scale=new f(1,1),this.rect=new e}return a.prototype.getPosition=function(){return this.position},a.prototype.setPosition=function(a,b){return this.position.set(a,b)},a.prototype.getX=function(){return this.position.getX()},a.prototype.setX=function(a){return this.position.setX(a)},a.prototype.getY=function(){return this.position.getY()},a.prototype.setY=function(a){return this.position.setY(a)},a.prototype.getScale=function(){return this.scale},a.prototype.setScale=function(a,b){return this.scale.set(a,b)},a.prototype.getScaleX=function(){return this.scale.getX()},a.prototype.setScaleX=function(a){return this.scale.setX(a)},a.prototype.getScaleY=function(){return this.scale.getY()},a.prototype.setScaleY=function(a){return this.scale.setY(a)},a.prototype.getOrigin=function(){return this.origin},a.prototype.setOrigin=function(a,b){return this.origin.set(a,b)},a.prototype.getOriginX=function(){return this.scale.getX()},a.prototype.setOriginX=function(a){return this.origin.setX(a)},a.prototype.getOriginY=function(){return this.origin.getY()},a.prototype.setOriginY=function(a){return this.origin.setY(a)},a.prototype.getSize=function(){return this.rect.getSize()},a.prototype.setSize=function(a,b){return this.rect.setSize(a,b)},a.prototype.getWidth=function(){return this.rect.getWidth()},a.prototype.getHeight=function(){return this.rect.getHeight()},a}(),c.exports=d})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("actor",["require","exports","module","./node"],function(a,c,d){var e,f;return f=a("./node"),e=function(a){function c(a){this.game=a,c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.update=function(){},c.prototype.draw=function(){},c}(f),d.exports=e})}.call(this),function(){define("stage",["require","exports","module"],function(a,b,c){var d;return d=function(){function a(a){this.game=a,this.actors=[]}return a.prototype.addActor=function(a){return this.actors.push(a)},a.prototype.removeActor=function(a){var b;return b=this.actors.indexOf(a),b>=0?this.actors.splice(b,1):void 0},a.prototype.update=function(a){var b,c,d,e,f;for(e=this.actors,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(b.update(a));return f},a.prototype.draw=function(a){var b,c,d,e,f;for(e=this.actors,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(b.draw(a));return f},a}(),c.exports=d})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("graphics/sprite",["require","exports","module","../math/vector2","../node"],function(a,c,d){var e,f,g;return g=a("../math/vector2"),e=a("../node"),f=function(a){function c(a,b){this.textureAtlas=a,this.frame=b,c.__super__.constructor.apply(this,arguments),this.rotation=0}return b(c,a),c.renderOffset=new g(0,0),c.prototype.getWidth=function(){return this.frame.frame.w*this.scale.x},c.prototype.getHeight=function(){return this.frame.frame.h*this.scale.y},c.prototype.getRotation=function(){return this.rotation},c.prototype.setRotation=function(a){return this.rotation=a},c.prototype.draw=function(a,b,d,e){var f,g,h,i,j,k,l,m,n;return null==e&&(e=!1),h=this.textureAtlas.getAtlasImage(),k=this.frame.frame.x,l=this.frame.frame.y,j=this.frame.frame.w,i=this.frame.frame.h,g=this.frame.frame.w*this.scale.x,f=this.frame.frame.h*this.scale.y,a.save(),m=Math.round((b||this.position.x)+this.origin.x+c.renderOffset.x),n=Math.round((d||this.position.y)+this.origin.y+c.renderOffset.y),e?(a.translate(m+g,n),a.scale(-1,1)):a.translate(m,n),a.rotate(Math.PI/180*this.rotation),a.drawImage(h,k,l,j,i,-this.origin.x,-this.origin.y,g,f),a.restore()},c}(e),d.exports=f})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define("graphics/animsprite",["require","exports","module","../math/vector2","./sprite"],function(a,c,d){var e,f,g;return g=a("../math/vector2"),f=a("./sprite"),e=function(a){function c(a,b,d,e){this.textureAtlas=a,this.frame=b,this.spriteCount=d,this.animationInterval=e,c.__super__.constructor.apply(this,arguments),this.rotation=0,this.sumDelta=0,this.spriteIndex=0}return b(c,a),c.prototype.getWidth=function(){return this.frame.frame.w*this.scale.x},c.prototype.getHeight=function(){return this.frame.frame.h*this.scale.y},c.prototype.getRotation=function(){return this.rotation},c.prototype.setRotation=function(a){return this.rotation=a},c.prototype.update=function(a){return this.sumDelta>=this.animationInterval&&(this.spriteIndex++,this.spriteIndex>this.spriteCount-1&&(this.spriteIndex=0),this.sumDelta-=this.animationInterval),this.sumDelta+=a},c.prototype.draw=function(a,b,c,d){var e,g,h,i,j,k,l,m,n,o;return null==d&&(d=!1),h=this.textureAtlas.getAtlasImage(),o=Math.floor(this.frame.frame.w/this.spriteCount),k=this.frame.frame.x,l=this.frame.frame.y,j=o,i=this.frame.frame.h,k+=o*this.spriteIndex,g=o*this.scale.x,e=this.frame.frame.h*this.scale.y,a.save(),m=(b|this.position.x)+this.origin.x+f.renderOffset.x,n=(c|this.position.y)+this.origin.y+f.renderOffset.y,d?(a.translate(m+g,n),a.scale(-1,1)):a.translate(m,n),a.rotate(Math.PI/180*this.rotation),a.drawImage(h,k,l,j,i,-this.origin.x,-this.origin.y,g,e),a.restore()},c}(f),d.exports=e})}.call(this),function(){define("graphics/textureregion",["require","exports","module","../math/vector2"],function(a,b,c){var d,e;return e=a("../math/vector2"),d=function(){function a(a,b){this.atlas=a,this.frame=b,this.image=this.atlas.getAtlasImage()}return a.prototype.draw=function(a,b,c,d,e,f,g){var h,i,j,k;return j=this.frame.frame.x+b,k=this.frame.frame.y+c,d=Math.min(d,this.frame.spriteSourceSize.w+this.frame.frame.x-(this.frame.frame.x+b)),e=Math.min(e,this.frame.spriteSourceSize.h+this.frame.frame.y-(this.frame.frame.y+c)),i=d,h=e,0!==d&&0!==e?a.drawImage(this.image,j,k,d,e,f,g,i,h):void 0},a}(),c.exports=d})}.call(this),function(){define("graphics/textureatlas",["require","exports","module","./sprite","./animsprite","./textureregion"],function(a,b,c){var d,e,f,g;return e=a("./sprite"),d=a("./animsprite"),g=a("./textureregion"),f=function(){function a(a,b){this.frames=a,this.image=b}return a.prototype.createSprite=function(a){var b;if(null==this.frames[a])throw new Error("The sprite "+a+" could not be found.");return b=new e(this,this.frames[a])},a.prototype.createAnimSprite=function(a,b,c){var e;if(null==this.frames[a])throw new Error("The sprite "+a+" could not be found.");return e=new d(this,this.frames[a],b,c)},a.prototype.findRegion=function(a){var b;if(null==this.frames[a])throw new Error("The region "+a+" could not be found.");return b=new g(this,this.frames[a])},a.prototype.getAtlasImage=function(){return this.image},a}(),c.exports=f})}.call(this),function(){define("graphics/bitmapfont",["require","exports","module","../math/rectangle"],function(a,b,c){var d,e;return e=a("../math/rectangle"),d=function(){function a(a,b){this.fontFile=a,this.textureRegion=b,this.chars={},this.parseFontFile()}return a.prototype.parseFontFile=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n;for(k=this.fontFile.split("\n"),n=[],g=0,i=k.length;i>g;g++)if(c=k[g],e=c.split(" "),"char"===e[0]){for(a={},l=e.slice(1,-1),h=0,j=l.length;j>h;h++)d=l[h],m=d.split("="),b=m[0],f=m[1],a[b]=parseInt(f);n.push(this.chars[a.id]=a)}else n.push(void 0);return n},a.prototype.getBounds=function(a){var b,c,d,f,g,h,i,j;for(h=0,f=0,g=i=0,j=a.length;j>=0?j>i:i>j;g=j>=0?++i:--i)d=a.substr(g,1),c=d.charCodeAt(0),null!=this.chars[c]&&(b=this.chars[c],h+=b.xadvance,f=b.height);return new e(0,0,h,f)},a.prototype.drawText=function(a,b,c,d){var e,f,g,h,i,j,k,l;for(i=0,l=[],h=j=0,k=b.length;k>=0?k>j:j>k;h=k>=0?++j:--j)g=b.substr(h,1),f=g.charCodeAt(0),null!=this.chars[f]&&(e=this.chars[f],this.textureRegion.draw(a,e.x,e.y,e.width,e.height,c+i+e.xoffset||0,d+e.yoffset||0),l.push(i+=e.xadvance));return l},a}(),c.exports=d})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};define("utilities/preloader",["require","exports","module","eventemitter","async"],function(b,d,e){var f,g,h;return f=b("eventemitter"),h=b("async"),g=function(b){function d(b,c){this.app=b,this.itemFilenames=c,this.loadJPEG=a(this.loadJPEG,this),this.loadJPG=a(this.loadJPG,this),this.loadPNG=a(this.loadPNG,this),this.loadItem=a(this.loadItem,this),this.items={}}return c(d,b),d.prototype.load=function(){var a=this;return h.map(this.itemFilenames,this.loadItem,function(b,c){var d,e,f;for(e=0,f=c.length;f>e;e++)d=c[e],a.items[d.filename]=d.item;return a.emit("done")})},d.prototype.get=function(a){if(null==this.items[a])throw new Error("The file "+a+" has not been preloaded!");return this.items[a]},d.prototype.loadItem=function(a,b){var c,d;if(c=a.split(".").pop(),d=this["load"+c.toUpperCase()],null==d)throw new Error("No loading method for "+a);return d(a,b)},d.prototype.loadJSON=function(a,b){return $.getJSON(a,function(c){return b(null,{filename:a,item:c})})},d.prototype.loadFNT=function(a,b){return $.get(a,function(c){return b(null,{filename:a,item:c})})},d.prototype.loadImage=function(a,b){var c;return c=new Image,c.onload=function(){return b(null,{filename:a,item:c})},c.src=a},d.prototype.loadPNG=function(){return this.loadImage.apply(this,arguments)},d.prototype.loadJPG=function(){return this.loadImage.apply(this,arguments)},d.prototype.loadJPEG=function(){return this.loadImage.apply(this,arguments)},d}(f),e.exports=g})}.call(this),function(){define("ldfw",["require","exports","module","./game","./screen","./actor","./stage","./node","./graphics/textureatlas","./graphics/textureregion","./graphics/sprite","./graphics/bitmapfont","./math/vector2","./utilities/preloader"],function(a,b,c){return c.exports={Game:a("./game"),Screen:a("./screen"),Actor:a("./actor"),Stage:a("./stage"),Node:a("./node"),TextureAtlas:a("./graphics/textureatlas"),TextureRegion:a("./graphics/textureregion"),Sprite:a("./graphics/sprite"),BitmapFont:a("./graphics/bitmapfont"),Vector2:a("./math/vector2"),Preloader:a("./utilities/preloader")}})}.call(this);